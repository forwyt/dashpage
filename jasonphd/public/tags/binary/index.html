<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
>
  <head>
    




<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="index, follow" />
<meta
  name="googlebot"
  content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"
/>

<meta name="description" content="" />


<meta property="og:title" content="Binary" />
<meta property="og:description" content="" />
<meta property="og:url" content="https://blogs.jasonphd.com/tags/binary/" />
<meta property="og:site_name" content="Jasonphd Blogs" />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://blogs.jasonphd.com/images/og-image.png" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Binary" />
<meta name="twitter:description" content="" />
<meta name="twitter:image" content="https://blogs.jasonphd.com/images/og-image.png" />

<title>Binary</title>

      <link
        rel="stylesheet"
        href="/css/output.min.97260c8f0033d223ec20178386e59725207060eda9376a3fe20db19533c0e1e7.css"
        integrity="sha256-lyYMjwAz0iPsIBeDhuWXJSBwYO2pN2o/4g2xlTPA4ec="
        crossorigin="anonymous"
      />


  </head>
  <body class="bg-white text-black antialiased">
    <section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
      <div class="flex h-screen flex-col justify-between font-sans">
        <header
          class="flex items-center w-full bg-white justify-between py-10 sticky top-0 z-50"
        >
          <a class="group break-words" aria-label="Jasonphd Blogs" href="/">
  <div class="flex items-center justify-between">
    <div class="sm:mr-3">
      <img src="/images/logo.svg" width="32" height="32" alt="Logo Image" />
    </div>

    <div class="hidden text-2xl font-semibold sm:block group-hover:underline">
      <span>Jasonphd Blogs</span>
    </div>
  </div>
</a>

<div class="flex items-center space-x-4 leading-5 sm:space-x-6">
  <div class="items-center space-x-4 overflow-x-auto flex sm:space-x-6">
    
      <a
        href="mailto:developerluhao@gmail.com"
        class="font-medium text-gray-900 hover:text-indigo-500"
        
        >ContactMe</a
      >
    
      <a
        href="/tags"
        class="font-medium text-gray-900 hover:text-indigo-500"
        
        >Tags</a
      >
    
      <a
        href="/about"
        class="font-medium text-gray-900 hover:text-indigo-500"
        
        >About</a
      >
    
    <a href="https://github.com/forwyt" target="_blank">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="fill-[#24292F] hover:fill-indigo-500 h-6 w-6"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12.0099 0C5.36875 0 0 5.5 0 12.3042C0 17.7432 3.43994 22.3472 8.21205 23.9767C8.80869 24.0992 9.02724 23.712 9.02724 23.3862C9.02724 23.101 9.00757 22.1232 9.00757 21.1045C5.6667 21.838 4.97099 19.6378 4.97099 19.6378C4.43409 18.2118 3.63858 17.8452 3.63858 17.8452C2.54511 17.0915 3.71823 17.0915 3.71823 17.0915C4.93117 17.173 5.56763 18.3545 5.56763 18.3545C6.64118 20.2285 8.37111 19.699 9.06706 19.373C9.16638 18.5785 9.48473 18.0285 9.82275 17.723C7.15817 17.4377 4.35469 16.3785 4.35469 11.6523C4.35469 10.3078 4.8316 9.20775 5.58729 8.35225C5.46807 8.04675 5.0504 6.7835 5.70677 5.09275C5.70677 5.09275 6.72083 4.76675 9.00732 6.35575C9.98625 6.08642 10.9958 5.9494 12.0099 5.94825C13.024 5.94825 14.0577 6.091 15.0123 6.35575C17.299 4.76675 18.3131 5.09275 18.3131 5.09275C18.9695 6.7835 18.5515 8.04675 18.4323 8.35225C19.2079 9.20775 19.6652 10.3078 19.6652 11.6523C19.6652 16.3785 16.8617 17.4172 14.1772 17.723C14.6148 18.11 14.9924 18.8433 14.9924 20.0045C14.9924 21.6545 14.9727 22.9788 14.9727 23.386C14.9727 23.712 15.1915 24.0992 15.7879 23.977C20.56 22.347 23.9999 17.7432 23.9999 12.3042C24.0196 5.5 18.6312 0 12.0099 0Z"
        />
      </svg>
    </a>
  </div>
</div>

        </header>
        <main class="mb-auto">
  <div class="mx-auto max-w-4xl px-4 sm:px-6 xl:px-0">
    <div class="space-y-8 pb-12 pt-16">
      <div class="space-y-2">
        <h1 class="text-3xl font-bold text-gray-900 sm:text-4xl uppercase">
          <span>Binary</span>
        </h1>
      </div>

      <div class="flex flex-col gap-8 md:flex-row">
        <aside class="hidden md:block md:w-64">
          <div class="sticky top-24 space-y-8">
  <div class="space-y-4">
    <h2 class="font-mono text-sm uppercase tracking-wider text-gray-500">
      Filter by tag
    </h2>

    <nav class="inline-flex flex-col space-y-3">
      
        <a
          class="font-mono text-sm uppercase
          
            text-indigo-600 font-extrabold
          "
          href="https://blogs.jasonphd.com/tags/binary/"
          >Binary<span class="ml-2 text-gray-400"
            >(1)</span
          ></a
        >
      
        <a
          class="font-mono text-sm uppercase
          
            text-gray-600
          "
          href="https://blogs.jasonphd.com/tags/code/"
          >Code<span class="ml-2 text-gray-400"
            >(1)</span
          ></a
        >
      
        <a
          class="font-mono text-sm uppercase
          
            text-gray-600
          "
          href="https://blogs.jasonphd.com/tags/ios/"
          >Ios<span class="ml-2 text-gray-400"
            >(1)</span
          ></a
        >
      
    </nav>
  </div>
</div>

        </aside>

        <div class="min-w-0 flex-1">
          <ul class="divide-y divide-gray-200">
            
              <li class="py-12 first:pt-0">
  <article>
    <div class="space-y-8">
      <div class="space-y-4">
        <div class="flex flex-col gap-4 text-sm text-gray-500">
          
          
          <time datetime="2018-03-17T14:54:44&#43;08:00">March 17, 2018</time>

          <h2 class="text-2xl font-semibold text-gray-900">
            <a class="break-words" href="https://blogs.jasonphd.com/ios/ios0/">二进制文件重排</a>
          </h2>

          <div class="flex flex-wrap gap-2">
            
              <a
                href="/tags/binary"
                class="mr-3 text-sm font-medium uppercase text-indigo-500 hover:text-indigo-600"
                >binary</a
              >
            
              <a
                href="/tags/code"
                class="mr-3 text-sm font-medium uppercase text-indigo-500 hover:text-indigo-600"
                >code</a
              >
            
              <a
                href="/tags/ios"
                class="mr-3 text-sm font-medium uppercase text-indigo-500 hover:text-indigo-600"
                >ios</a
              >
            
          </div>
        </div>

        <div class="text-gray-600 line-clamp-3"><p><img src="/images/ww2.webp" alt="lancher" title="start"></p>
<p>名称来自战争术语 抢滩登陆 (beach head)
目的是更快的将iOS的application启动提速. 让用户更快的打开app !推广一波🤣 <a href="https://github.com/forwyt/beachhead">开源库</a></p>
<h2 id="进程访问内存的原理">进程访问内存的原理</h2>
<blockquote>
<p>在计算机中，<strong>进程</strong> 是操作系统分配给正在运行的程序的一种资源。它可以看作是程序的执行实例，包括程序计数器、寄存器、堆栈和打开的文件等。每个进程都在自己的<strong>虚拟地址</strong>空间中运行，这使得每个进程都有自己独立的内存空间。</p></blockquote>
<h3 id="虚拟地址">虚拟地址</h3>
<ol>
<li>
<p>地址空间划分：操作系统将每个进程的地址空间划分为多个固定大小的页。通常，每个页的大小为4KB</p>
</li>
<li>
<p>页表创建：操作系统为每个进程创建一个页表，用于将虚拟地址映射到物理地址。页表是一个数据结构，它记录了每个虚拟页对应的物理页的地址。</p>
</li>
<li>
<p>虚拟地址转换：当进程访问内存时，它使用虚拟地址。操作系统通过查找页表中的映射关系，将虚拟地址转换为物理地址。这个转换过程通常包括两个步骤。</p>
</li>
</ol>
<ul>
<li>页目录查找：进程的虚拟地址通常被划分为三个部分：页目录索引、页表索引和页内偏移。首先，操作系统使用页目录索引在页目录中查找对应的页表。</li>
<li>页表查找：操作系统使用页表索引在找到的页表中查找对应的物理页的地址</li>
</ul>
<ol start="4">
<li>内存访问：当虚拟地址被转换为物理地址后，进程可以使用物理地址来访问内存。这样，进程就可以在自己的虚拟地址空间中进行内存操作，而不需要关心物理内存的实际分布。</li>
</ol>
<p>为了提高效率和方便管理，又对虚拟内存和物理内存又进行分页（Page）。当进程访问一个虚拟内存 Page 而对应的物理内存却不存在时，会触发一次缺页中断（Page Fault），分配物理内存，有需要的话会从磁盘 <strong>mmap</strong> 读人数据。
mmap</p>
<blockquote>
<p>mmap是一种内存映射技术，它允许应用程序将文件或其他设备映射到自己的虚拟地址空间中，从而可以像访问内存一样访问这些数据。mmap可以提供高效的读写文件的方式，并且还可以用于共享内存和匿名内存映射等场景</p></blockquote>
<h3 id="page-fault">Page Fault</h3>
<blockquote>
<p>当进程访问一个虚拟内存 Page 而对应的物理内存却不存在时，会触发一次缺页中断（Page Fault），分配物理内存，有需要的话会从磁盘 mmap 读人数据。通过 App Store 渠道分发的 App，Page Fault 还会进行签名验证，所以一次 Page Fault 的耗时比想象的多</p></blockquote>
<p>1.虚拟内存允许操作系统摆脱物理 RAM 的限制。虚拟内存管理器创建一个逻辑地址空间（或“每个进程的“虚拟”地址空间）并将其划分为大小统一的内存块，称为页面。处理器及其内存管理单元（MMU）维护一个页表将程序逻辑地址空间中的页面映射到计算机 RAM 中的硬件地址。当程序代码访问内存中的地址时，MMU 使用页表将指定的逻辑地址转换为实际的硬件内存地址。这种转换是自动发生的，并且对于正在运行的应用程序是透明的。</p>
<p>2.对于程序而言，其逻辑地址空间中的地址始终可用。但是，如果应用程序访问当前不在物理 RAM 中的内存页上的地址，发生页面错误。当这种情况发生时，虚拟内存系统会调用一个特殊的页面错误处理程序来立即响应该错误。页面错误处理程序停止当前正在执行的代码，找到物理内存的空闲页面，从磁盘加载包含所需数据的页面，更新页表，然后将控制权返回给程序代码，程序代码可以访问内存地址通常情况下。这个过程被称为寻呼。</p>
<p>3.如果物理内存中没有可用的空闲页面，则处理程序必须首先释放现有页面以为新页面腾出空间。系统如何发布页面取决于平台。在 OS X 中，虚拟内存系统经常将页面写入后备存储。这后备存储是基于磁盘的存储库，其中包含给定进程使用的内存页的副本。将数据从物理内存移动到后备存储称为调出（或“交换出”）；将数据从后备存储移回物理内存称为分页（或“交换”）。在 iOS 中，没有后备存储，因此页面永远不会调出到磁盘，但只读页面仍会根据需要从磁盘调入。</p>
<p>4.在 OS X 和早期版本的 iOS 中，页面的大小是 4 KB。在更高版本的 iOS 中，基于 A7 和 A8 的系统向由 4 KB 物理页支持的 64 位用户空间公开 16 KB 页面，而 A9 系统公开由 16 KB 物理页支持的 16 KB 页面。这些大小决定了发生页面错误时系统从磁盘读取多少KB。当系统花费过多的时间处理页面错误以及读写页面而不是执行程序代码时，就会发生磁盘抖动。</p></div>
      </div>

      <a
        href="https://blogs.jasonphd.com/ios/ios0/"
        class="group inline-flex items-center text-sm text-gray-600 transition-colors hover:text-gray-900"
        >Read Article<svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="ml-1 h-4 w-4 transition-transform group-hover:translate-x-0.5"
        >
          <path d="M5 12h14"></path>
          <path d="m12 5 7 7-7 7"></path>
        </svg>
      </a>
    </div>
  </article>
</li>

            
          </ul>
        </div>
      </div>
    </div>
  </div>
</main>
        <footer><div class="mt-16 flex flex-col items-center">
  <div class="mb-2 text-sm text-gray-500">
    <span>(C) 2025. Jasonphd Blogs all rights reserved.</span>
  </div>

  <div class="mb-8 text-sm text-gray-500">
    <span class="mr-1">Built with</span>
    <a
      class="font-semibold underline"
      href="https://github.com/discaptive/hugo-discaptive"
      target="_blank"
      >hugo-discaptive</a
    >
  </div>
</div>
</footer>
      </div>
    </section>
  </body>
</html>
